@using Microsoft.AspNet.Identity
@model ZaKhan.Model.BookingModel

@{
    ViewBag.Title = "Create";
}

<link href="~/Content/Site.css" rel="stylesheet" />
<div class="panel panel-default">
    <div class="panel-heading" align="center">
        <h2>Create</h2>
    </div>
<div class="panel-body">


@using ZaKhan.Data;
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>

        <style type="text/css">
            .show {
                display: block;
            }

            .hide {
                display: none;
            }
        </style>

        <script type="text/javascript">
            function hideSelect() {
                var select = document.getElementById("gone");
                select.className = "hide";
            }

            function showSelect() {
                var select = document.getElementById("gone");
                select.className = "show";

            }
        </script>





    </head>

    <body>

    <script src="~/Scripts/jquery-1.10.2.min.js"></script>

    <table border="0">
        @foreach (Patient p in ViewBag.listdetails)
        {
            <tr>
                <td align="center">
                    <h5 style="font-weight: bold">UserName: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.TextBox("IDnumber", User.Identity.GetUserName(), new {disabled = "true", Style = "width:250px"}) </h5><br/>
                    <h5 style="font-weight: bold">FirstName:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.TextBox("FirstName", @p.FirstName, new {disabled = "true", Style = "width:250px"})</h5><br/>
                    <h5 style="font-weight: bold">LastName:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.TextBox("LastName", @p.LastName, new {disabled = "true", Style = "width:250px"})</h5><br/>
                    <h5 style="font-weight: bold">Email Address:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.TextBox("Email", @p.Email, new {disabled = "true", Style = "width:250px"})</h5><br/>
                    <h5 style="font-weight: bold">Contact Number:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.TextBox("ContactNo", @p.Cellphone, new {disabled = "true", Style = "width:250px"})</h5><br/>



                </td>
                <td align="center">
                    @Html.ValidationSummary(true, "", new {@class = "text-danger"})
                    <h5 style="font-weight: bold">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Branch :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.DropDownListFor(x => x.BranchName, Model.Branch, "Select a branch", new {@id = "ddlBranch", Style = "width:250px"})@Html.ValidationMessageFor(model => model.BranchName, "", new {@class = "text-danger"})</h5><br/>
                    <h5 style="font-weight: bold">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Booking Date :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.TextBox("BookedDate", Model.BookedDate, new {Style = "width:210px"})&nbsp;&nbsp;&nbsp;&nbsp;@Html.ValidationMessageFor(model => model.BookedDate, "", new {@class = "text-danger"})</h5><br/>
                    <h5 style="font-weight: bold">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Booking Time : &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Html.DropDownList("BookedTime", new List<SelectListItem> {new SelectListItem {Text = "09:00am", Value = "09:00am"}, new SelectListItem {Text = "09:30am", Value = "09:30am"}, new SelectListItem {Text = "10:00am", Value = "10:00am"}, new SelectListItem {Text = "10:30am", Value = "10:30am"}, new SelectListItem {Text = "11:00am", Value = "11:00am"}, new SelectListItem {Text = "11:30am", Value = "11:30am"}, new SelectListItem {Text = "12:00pm", Value = "12:00pm"}, new SelectListItem {Text = "12:30pm", Value = "12:30pm"}, new SelectListItem {Text = "1:00pm", Value = "1:00pm"}, new SelectListItem {Text = "1:30pm", Value = "1:30pm"}, new SelectListItem {Text = "2:00pm", Value = "2:00pm"}, new SelectListItem {Text = "2:30pm", Value = "2:30pm"}, new SelectListItem {Text = "3:00pm", Value = "3:00pm"}, new SelectListItem {Text = "3:30pm", Value = "3:30pm"}, new SelectListItem {Text = "4:00pm", Value = "4:00pm"}, new SelectListItem {Text = "4:30pm", Value = "4:30pm"}, new SelectListItem {Text = "5:00pm", Value = "5:00pm"}}, "Select Time", new {Style = "width:250px"})@Html.ValidationMessageFor(model => model.BookedTime, "", new {@class = "text-danger"})</h5><br/>
                    <h5 style="font-weight: bold">&nbsp;&nbsp;&nbsp;Choose a specific Optometrist ? :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="my_radio" type="radio" name="options" value="some_value" onclick="showSelect();"/><label for="my_radio">Yes</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="my_radio" type="radio" name="options" value="some_value" onclick="hideSelect();"/><label for="my_radio">No</label></h5><br/>
                    <div id="gone"><h5 style="font-weight: bold">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optometrist :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Html.DropDownListFor(x => x.OptometristName, new List<SelectListItem>(), "Select an optometrist", new {@id = "ddlOptometrist", Style = "width:250px"})@Html.ValidationMessageFor(model => model.OptometristName, "", new {@class = "text-danger"})</h5>
                    </div><br/>
                </td>
            </tr>
        }
    </table>



    </body>
    </html>
    <div class="form-horizontal">
        <hr/>

        <script src="Scripts/jquery-1.10.2.js" type="text/javascript"></script>

        <script src="Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>

        <script type="text/javascript">

            $(document)
                .ready(function() {

                    //Dropdownlist Selectedchange event

                    $("#ddlBranch")
                        .change(function() {

                            $("#ddlOptometrist").empty();

                            $.ajax({
                                type: 'POST',

                                url: '@Url.Action("GetOptometrist")', // we are calling json method


                                dataType: 'json',


                                data: { Description: $("#ddlBranch").val() },


                                success: function(states) {


                                    $.each(states,
                                        function(i, state) {

                                            $("#ddlOptometrist")
                                                .append('<option value="' +
                                                    0 +
                                                    '">' +
                                                    "Select an Optometrist" +
                                                    '</option>',
                                                    '<option value="' +
                                                    state.Value +
                                                    '">' +
                                                    state.Text +
                                                    '</option>');


                                        });

                                },

                                error: function(ex) {

                                    alert('Failed to retrieve states.' + ex);

                                }

                            });

                            return false;

                        })

                });

        </script>



        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-success"/>
                |@Html.ActionLink("Update", "MyAccount", "PatientUpdate", null, new { @class = "btn btn-primary" }) |
            </div>
        </div>
    </div>

}
<div>
    @if (User.IsInRole("Admin").Equals(true))
    {
        @Html.ActionLink("Back", "Index", "Booking", null, new
        {
            @class = "btn btn-warning"
        })
    }
    else
    {
        @Html.ActionLink("Back", "Bookings", "Booking", null, new
        {
            @class = "btn btn-warning"
        })
    }
</div>

<link href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" rel="Stylesheet"
      type="text/css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

<!-- Code for DatePicker -->
<script language="javascript">

    $(document)
        .ready(function() {
            $("#BookedDate")
                .datepicker({
                    minDate: 0, //current date
                    maxDate: '+1M', //range for only 1 month
                    showOn: "button",
                    buttonImage: "/Content/Images/icon-calendar.png",

                    buttonImageOnly: true,
                    buttonText: "Select date"
                });
        });

</script>
@Scripts.Render("~/bundles/jqueryval")
</div>
</div>